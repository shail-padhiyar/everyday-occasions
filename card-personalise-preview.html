<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Everyday Occasions</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.svg">

    <!--======================================== Font Family ========================================-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <!--======================================== Font Family ========================================-->


    <!--======================================== CSS Links ========================================-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <!--======================================== CSS Links ========================================-->
</head>
<body>
    <!--======================================== Header Section ========================================-->
    <header class="header-section personalise-card">
      <nav class="py-3">
          <div class="container">
              <div class="row d-flex align-items-center">
                  <div class="col-sm-6 col-auto">
                      <a href="card-personalise.html" class="btn btn-outline-primary rounded-3 d-inline-block me-auto p-2 p-sm-3 min-w-auto">Back to Edit</a>
                  </div>
                  <div class="col-sm-6 col-auto">
                    <div class="d-flex justify-content-end">
                      <a href="cart.html" class="btn btn-outline-primary rounded-3 me-3 d-flex align-items-center p-2 p-sm-3 min-w-auto"><img src="images/icon-save.svg" class="me-2" alt="icon"> Save</a>
                      <a href="cart.html" class="btn btn-primary rounded-3 p-2 p-sm-3 min-w-auto">Add to Cart</a>
                    </div>
                  </div>
              </div>
          </div>
        </nav>
  </header>
    <!--======================================== Header Section ========================================-->
    

    <!--======================================== Main Section ========================================-->
    <main>
        <!--======================================== Personalised Card Preview Section ========================================-->
        <div class="personalise-card-preivew-section d-flex">
            <div class="container section-title">
                <div class="row h-100">
                    <div class="book-section text-center">
                      <div class="d-flex justify-content-center">
                        <button class="btn btn-outline-primary me-3 min-w-auto" onclick="turnLeft()"><img src="images/icon-arrow-right-forward-orange.svg" class="rotate-180" alt="icon"></button>
                        </div>
                        <div class="container">
                          <div class="right">
                            <figure class="back" id="back-cover"><img src="images/preview-page-4.jpg" alt="card image"></figure>
                            <figure class="front"><img src="images/preview-page-3.jpg" alt="card image"></figure>
                          </div>
                          <!-- <div class="right">
                            <figure class="back" style="background-image: url();"></figure>
                            <figure class="front" style="background-image: url();"></figure>
                          </div>
                          <div class="right">
                            <figure class="back" style="background-image: url();"></figure>
                            <figure class="front" style="background-image: url();"></figure>
                          </div> -->
                      
                          <div class="right">
                            <figure class="back"><img src="images/preview-page-2.jpg" alt="card image"></figure>
                            <figure class="front" id="cover"><img src="images/preview-page-1.jpg" alt="card image"></figure>
                          </div>
                        </div>
                        <div class="d-flex justify-content-center">
                            <button class="btn btn-outline-primary turnRight ms-3 min-w-auto" onclick="turnRight()"><img src="images/icon-arrow-right-forward-orange.svg" alt="icon"></button>
                        </div>
                      </div>
                </div>
            </div>
        </div>
        <!--======================================== Personalised Card Preview Section ========================================-->
    </main>
    <!--======================================== Main Section ========================================-->
    
    <!--======================================== JS Links ========================================-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!--======================================== JS Links ========================================-->


<script>
  $(document).ready(function() {
    var rightElements = $('.right');
      $('.right').addClass('right-center'); // Add the 'right-center' class to all elements with the class 'right'
      $(".turnRight").click(function(){
        $('.right').removeClass('right-center');
      });
  });
</script>


<script>
  var $right = $(".right");
  var si = $right.length;
  var z = 1;

  // turnRight(); // open this if we want to show from inner page
  function turnRight() {
    if (si >= 1) {
      si--;
    } else {
      si = $right.length - 1;

      function sttmot(i) {
        setTimeout(function () {
          $right.eq(i).css("z-index", "auto");
        }, 300);
      }

      $right.each(function (i) {
        $(this).removeClass("flip").addClass("right");
        sttmot(i);
        z = 1;
      });
    }

    $right.eq(si).addClass("flip");
    z++;
    $right.eq(si).css("z-index", z);


    var allHaveFlip = true;
    $('.right').each(function() {
        if (!$(this).hasClass('flip')) {
            allHaveFlip = false;
            return false;
        }
    });
    if (allHaveFlip) {
        $('.right').addClass('left-center');
    } else {
        $('.right').removeClass('left-center');
    }
  }

  function turnLeft() {
    
    if (si < $right.length) {
      si++;
    } else {
      si = 1;
      $right.slice(1).each(function (i) {
        $(this).addClass("flip").css("z-index", $right.length + 1 - i);
      });
    }

    $right.eq(si - 1).removeClass("flip");
    setTimeout(function () {
      $right.eq(si - 1).css("z-index", "auto");
    }, 350);


    var allHaveFlipLeft = false;
    $('.right').each(function() {
        if ($(this).hasClass('flip')) {
            allHaveFlipLeft = true;
            return true;
        }
        else{
          $('.right').addClass('right-center');
        }
    });

    if (allHaveFlipLeft) {
        $('.right').removeClass('left-center');
        $('.right').removeClass('right-center');
    }
  }
</script>

<!-- Change card height according screen width changes -->
<script>
  $(document).ready(function () {
    function adjustContainerHeight() {
        // Get the height of `.personalise-card-preview-section .right > figure.back`
        const backFigureHeight = $('.personalise-card-preivew-section .right > figure.back').outerHeight();

        // Apply that height to `.personalise-card-preview-section .book-section > .container`
        $('.personalise-card-preivew-section .book-section > .container').css('height', backFigureHeight + 'px');
    }

    // Run the function on page load
    adjustContainerHeight();

    // Run the function on window resize
    $(window).resize(function () {
        adjustContainerHeight();
    });
});
</script>

</body>
</html>